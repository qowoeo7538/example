[TOC]

## 1 特性

1. 回弹性：遵守“反应式宣言”的原则，Akka在出现故障时能够自我修复，并保持响应能力。
2. 高性能：内存占用少，每GB可以创建约250万个actor（参与者）。
3. 弹性和分散性：分布式系统没有单点故障，具有跨节点的负载平衡和自适应路由。具有集群分片的事件源和CQRS（读写责任分离）。使用CRDT（无冲突的复制数据类型）实现最终一致性的分布式数据。
4. 反应流数据：具有回压的异步非阻塞流处理。完全异步和基于流的HTTP服务器和客户端为构建微服务提供了很好的平台。

## 2 Actor模型

- Actor的执行环境编排了一个线程池，以透明的驱动所有Actor。
- 每个Actor代表一个基本的计算单元，可以接收消息并基于消息做计算处理。
- 每个Actor之间是相互隔离的，不存在资源共享，每个Actor中可一个持有一个自己私有状态的变量，这个状态变量是其它Actor改变不了的。
- 每个Actor都有响应消息的机制的代码。
- 每个Actor都有自己的地址，Actor之间通过地址和消息通信。
- 每个Actor都有自己的消息邮箱，所有发送方向接收方Actor发送消息时，实际是把消息投递到接受者的邮箱进行排队，排队是按发送操作的时间顺序发生的。

## 3 处理流程

1. Actor将消息添加到队列的末尾。
2. 如果Actor没有被安排执行，则将其标记为准备执行。
3. Actor系统框架内的调度程序将接收该Actor并开始执行。
4. Actor从队列的前面选择消息。
5. Actor修改内部状态，将消息发送给其它Actor。
6. Actor处于无调度、空闲状态。

## 4 异常处理

Akka强制将所有Actor组织成树状层次结构，即创建另一个Actor的Actor成为该新Actor的父节点。当一个Actor失败时，它的父Acotr会收到通知，并且对失败做出反应。同样，如果父Actor停止了，则其所有子Actor也将递归停止，这项服务成为监督。监督者将任务委托给子Actor，因此失败必须对其失败做出相应。当子级抛出异常时，它会挂起自身及其所有下级，并向其监督者发送一条消息，也就是故障信号。如果一个Actor达到异常状态并崩溃，无论如何都可以做出反应，发送消息的Actor可以在目标重新启动时继续向其发送消息。

